{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NoteBook Management</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href='{% static "style.css" %}' />
    <link
      rel="icon"
      type="image/png"
      sizes="96x96"
      href="{% static 'todosx.png' %}"
    />
  </head>
  <body>
    <div class="overlay">
      <form class="input-container form">
        <h2 class="label form-head">
          <span> Add Note </span>
          <a class="x"><i class="fa-solid fa-xmark icon"></i></a>
        </h2>

        <div class="main-form">
          <div class="group">
            <h4 class="label">Title</h4>
            <input
              type="text"
              name="title"
              id="search_add"
              class="add title_input"
            />
          </div>
          <div class="group">
            <h4 class="label">Desc</h4>
            <textarea
              name="desc"
              id=""
              cols="30"
              rows="3"
              class="add desc_input"
            ></textarea>
          </div>

          <button class="submit group">Submit</button>
        </div>
      </form>
    </div>

    <div class="container">
      <div class="collection">
        <h1 class="main-head">
          <!-- <svg  height="55" viewBox="0 0 189 42" fill="none" style="width: 100%;" xmlns="http://www.w3.org/2000/svg">
      <path d="M14.168 11.484V13.556H8.848V31H6.3V13.556H0.952V11.484H14.168ZM23.9964 31.252C22.5591 31.252 21.2524 30.9253 20.0764 30.272C18.9191 29.6187 18.0044 28.6947 17.3324 27.5C16.6791 26.2867 16.3524 24.8867 16.3524 23.3C16.3524 21.732 16.6884 20.3507 17.3604 19.156C18.0511 17.9427 18.9844 17.0187 20.1604 16.384C21.3364 15.7307 22.6524 15.404 24.1084 15.404C25.5644 15.404 26.8804 15.7307 28.0564 16.384C29.2324 17.0187 30.1564 17.9333 30.8284 19.128C31.5191 20.3227 31.8644 21.7133 31.8644 23.3C31.8644 24.8867 31.5098 26.2867 30.8004 27.5C30.1098 28.6947 29.1671 29.6187 27.9724 30.272C26.7778 30.9253 25.4524 31.252 23.9964 31.252ZM23.9964 29.012C24.9111 29.012 25.7698 28.7973 26.5724 28.368C27.3751 27.9387 28.0191 27.2947 28.5044 26.436C29.0084 25.5773 29.2604 24.532 29.2604 23.3C29.2604 22.068 29.0178 21.0227 28.5324 20.164C28.0471 19.3053 27.4124 18.6707 26.6284 18.26C25.8444 17.8307 24.9951 17.616 24.0804 17.616C23.1471 17.616 22.2884 17.8307 21.5044 18.26C20.7391 18.6707 20.1231 19.3053 19.6564 20.164C19.1898 21.0227 18.9564 22.068 18.9564 23.3C18.9564 24.5507 19.1804 25.6053 19.6284 26.464C20.0951 27.3227 20.7111 27.9667 21.4764 28.396C22.2418 28.8067 23.0818 29.012 23.9964 29.012ZM34.2626 23.272C34.2626 21.704 34.5799 20.332 35.2146 19.156C35.8493 17.9613 36.7173 17.0373 37.8186 16.384C38.9386 15.7307 40.1893 15.404 41.5706 15.404C42.7653 15.404 43.8759 15.684 44.9026 16.244C45.9293 16.7853 46.7133 17.504 47.2546 18.4V10.28H49.8306V31H47.2546V28.116C46.7506 29.0307 46.0039 29.7867 45.0146 30.384C44.0253 30.9627 42.8679 31.252 41.5426 31.252C40.1799 31.252 38.9386 30.916 37.8186 30.244C36.7173 29.572 35.8493 28.6293 35.2146 27.416C34.5799 26.2027 34.2626 24.8213 34.2626 23.272ZM47.2546 23.3C47.2546 22.1427 47.0213 21.1347 46.5546 20.276C46.0879 19.4173 45.4533 18.764 44.6506 18.316C43.8666 17.8493 42.9986 17.616 42.0466 17.616C41.0946 17.616 40.2266 17.84 39.4426 18.288C38.6586 18.736 38.0333 19.3893 37.5666 20.248C37.0999 21.1067 36.8666 22.1147 36.8666 23.272C36.8666 24.448 37.0999 25.4747 37.5666 26.352C38.0333 27.2107 38.6586 27.8733 39.4426 28.34C40.2266 28.788 41.0946 29.012 42.0466 29.012C42.9986 29.012 43.8666 28.788 44.6506 28.34C45.4533 27.8733 46.0879 27.2107 46.5546 26.352C47.0213 25.4747 47.2546 24.4573 47.2546 23.3ZM60.8285 31.252C59.3911 31.252 58.0845 30.9253 56.9085 30.272C55.7511 29.6187 54.8365 28.6947 54.1645 27.5C53.5111 26.2867 53.1845 24.8867 53.1845 23.3C53.1845 21.732 53.5205 20.3507 54.1925 19.156C54.8831 17.9427 55.8165 17.0187 56.9925 16.384C58.1685 15.7307 59.4845 15.404 60.9405 15.404C62.3965 15.404 63.7125 15.7307 64.8885 16.384C66.0645 17.0187 66.9885 17.9333 67.6605 19.128C68.3511 20.3227 68.6965 21.7133 68.6965 23.3C68.6965 24.8867 68.3418 26.2867 67.6325 27.5C66.9418 28.6947 65.9991 29.6187 64.8045 30.272C63.6098 30.9253 62.2845 31.252 60.8285 31.252ZM60.8285 29.012C61.7431 29.012 62.6018 28.7973 63.4045 28.368C64.2071 27.9387 64.8511 27.2947 65.3365 26.436C65.8405 25.5773 66.0925 24.532 66.0925 23.3C66.0925 22.068 65.8498 21.0227 65.3645 20.164C64.8791 19.3053 64.2445 18.6707 63.4605 18.26C62.6765 17.8307 61.8271 17.616 60.9125 17.616C59.9791 17.616 59.1205 17.8307 58.3365 18.26C57.5711 18.6707 56.9551 19.3053 56.4885 20.164C56.0218 21.0227 55.7885 22.068 55.7885 23.3C55.7885 24.5507 56.0125 25.6053 56.4605 26.464C56.9271 27.3227 57.5431 27.9667 58.3085 28.396C59.0738 28.8067 59.9138 29.012 60.8285 29.012ZM77.4786 31.252C76.3026 31.252 75.248 31.056 74.3146 30.664C73.3813 30.2533 72.644 29.6933 72.1026 28.984C71.5613 28.256 71.2626 27.4253 71.2066 26.492H73.8386C73.9133 27.2573 74.268 27.8827 74.9026 28.368C75.556 28.8533 76.4053 29.096 77.4506 29.096C78.4213 29.096 79.1866 28.8813 79.7466 28.452C80.3066 28.0227 80.5866 27.4813 80.5866 26.828C80.5866 26.156 80.288 25.6613 79.6906 25.344C79.0933 25.008 78.1693 24.6813 76.9186 24.364C75.78 24.0653 74.8466 23.7667 74.1186 23.468C73.4093 23.1507 72.7933 22.6933 72.2706 22.096C71.7666 21.48 71.5146 20.6773 71.5146 19.688C71.5146 18.904 71.748 18.1853 72.2146 17.532C72.6813 16.8787 73.344 16.3653 74.2026 15.992C75.0613 15.6 76.0413 15.404 77.1426 15.404C78.8413 15.404 80.2133 15.8333 81.2586 16.692C82.304 17.5507 82.864 18.7267 82.9386 20.22H80.3906C80.3346 19.4173 80.008 18.7733 79.4106 18.288C78.832 17.8027 78.048 17.56 77.0586 17.56C76.144 17.56 75.416 17.756 74.8746 18.148C74.3333 18.54 74.0626 19.0533 74.0626 19.688C74.0626 20.192 74.2213 20.612 74.5386 20.948C74.8746 21.2653 75.2853 21.5267 75.7706 21.732C76.2746 21.9187 76.9653 22.1333 77.8426 22.376C78.944 22.6747 79.84 22.9733 80.5306 23.272C81.2213 23.552 81.8093 23.9813 82.2946 24.56C82.7986 25.1387 83.06 25.8947 83.0786 26.828C83.0786 27.668 82.8453 28.424 82.3786 29.096C81.912 29.768 81.2493 30.3 80.3906 30.692C79.5506 31.0653 78.58 31.252 77.4786 31.252ZM106.472 11.624V31H103.924V16.552L97.4835 31H95.6915L89.2235 16.524V31H86.6755V11.624H89.4195L96.5875 27.64L103.756 11.624H106.472ZM109.841 23.272C109.841 21.704 110.158 20.332 110.793 19.156C111.427 17.9613 112.295 17.0373 113.397 16.384C114.517 15.7307 115.758 15.404 117.121 15.404C118.465 15.404 119.631 15.6933 120.621 16.272C121.61 16.8507 122.347 17.5787 122.833 18.456V15.656H125.409V31H122.833V28.144C122.329 29.04 121.573 29.7867 120.565 30.384C119.575 30.9627 118.418 31.252 117.093 31.252C115.73 31.252 114.498 30.916 113.397 30.244C112.295 29.572 111.427 28.6293 110.793 27.416C110.158 26.2027 109.841 24.8213 109.841 23.272ZM122.833 23.3C122.833 22.1427 122.599 21.1347 122.133 20.276C121.666 19.4173 121.031 18.764 120.229 18.316C119.445 17.8493 118.577 17.616 117.625 17.616C116.673 17.616 115.805 17.84 115.021 18.288C114.237 18.736 113.611 19.3893 113.145 20.248C112.678 21.1067 112.445 22.1147 112.445 23.272C112.445 24.448 112.678 25.4747 113.145 26.352C113.611 27.2107 114.237 27.8733 115.021 28.34C115.805 28.788 116.673 29.012 117.625 29.012C118.577 29.012 119.445 28.788 120.229 28.34C121.031 27.8733 121.666 27.2107 122.133 26.352C122.599 25.4747 122.833 24.4573 122.833 23.3ZM137.191 15.376C139.057 15.376 140.569 15.9453 141.727 17.084C142.884 18.204 143.463 19.828 143.463 21.956V31H140.943V22.32C140.943 20.7893 140.56 19.6227 139.795 18.82C139.029 17.9987 137.984 17.588 136.659 17.588C135.315 17.588 134.241 18.008 133.439 18.848C132.655 19.688 132.263 20.9107 132.263 22.516V31H129.715V15.656H132.263V17.84C132.767 17.056 133.448 16.4493 134.307 16.02C135.184 15.5907 136.145 15.376 137.191 15.376ZM148.941 13.164C148.455 13.164 148.045 12.996 147.709 12.66C147.373 12.324 147.205 11.9133 147.205 11.428C147.205 10.9427 147.373 10.532 147.709 10.196C148.045 9.86 148.455 9.692 148.941 9.692C149.407 9.692 149.799 9.86 150.117 10.196C150.453 10.532 150.621 10.9427 150.621 11.428C150.621 11.9133 150.453 12.324 150.117 12.66C149.799 12.996 149.407 13.164 148.941 13.164ZM150.173 15.656V31H147.625V15.656H150.173ZM153.563 23.272C153.563 21.704 153.881 20.332 154.515 19.156C155.15 17.9613 156.018 17.0373 157.119 16.384C158.239 15.7307 159.481 15.404 160.843 15.404C162.187 15.404 163.354 15.6933 164.343 16.272C165.333 16.8507 166.07 17.5787 166.555 18.456V15.656H169.131V31H166.555V28.144C166.051 29.04 165.295 29.7867 164.287 30.384C163.298 30.9627 162.141 31.252 160.815 31.252C159.453 31.252 158.221 30.916 157.119 30.244C156.018 29.572 155.15 28.6293 154.515 27.416C153.881 26.2027 153.563 24.8213 153.563 23.272ZM166.555 23.3C166.555 22.1427 166.322 21.1347 165.855 20.276C165.389 19.4173 164.754 18.764 163.951 18.316C163.167 17.8493 162.299 17.616 161.347 17.616C160.395 17.616 159.527 17.84 158.743 18.288C157.959 18.736 157.334 19.3893 156.867 20.248C156.401 21.1067 156.167 22.1147 156.167 23.272C156.167 24.448 156.401 25.4747 156.867 26.352C157.334 27.2107 157.959 27.8733 158.743 28.34C159.527 28.788 160.395 29.012 161.347 29.012C162.299 29.012 163.167 28.788 163.951 28.34C164.754 27.8733 165.389 27.2107 165.855 26.352C166.322 25.4747 166.555 24.4573 166.555 23.3ZM172.485 23.3C172.485 21.7133 172.803 20.332 173.437 19.156C174.072 17.9613 174.949 17.0373 176.069 16.384C177.208 15.7307 178.505 15.404 179.961 15.404C181.847 15.404 183.396 15.8613 184.609 16.776C185.841 17.6907 186.653 18.96 187.045 20.584H184.301C184.04 19.6507 183.527 18.9133 182.761 18.372C182.015 17.8307 181.081 17.56 179.961 17.56C178.505 17.56 177.329 18.064 176.433 19.072C175.537 20.0613 175.089 21.4707 175.089 23.3C175.089 25.148 175.537 26.576 176.433 27.584C177.329 28.592 178.505 29.096 179.961 29.096C181.081 29.096 182.015 28.8347 182.761 28.312C183.508 27.7893 184.021 27.0427 184.301 26.072H187.045C186.635 27.64 185.813 28.9 184.581 29.852C183.349 30.7853 181.809 31.252 179.961 31.252C178.505 31.252 177.208 30.9253 176.069 30.272C174.949 29.6187 174.072 28.6947 173.437 27.5C172.803 26.3053 172.485 24.9053 172.485 23.3Z" fill="url(#paint0_linear_371_284)"/>
      <path d="M28.0918 15C30.9233 15 32.5 16.513 32.5 19.1055V27.886C32.5 30.521 30.9233 32 28.0918 32H20.4092C17.6225 32 16 30.521 16 27.886V19.1055C16 16.513 17.6225 15 20.4092 15H28.0918ZM20.6567 26.679C20.3817 26.6535 20.1158 26.7725 19.9692 26.9935C19.8225 27.206 19.8225 27.4865 19.9692 27.7075C20.1158 27.92 20.3817 28.0475 20.6567 28.0135H27.8433C28.2091 27.9795 28.485 27.6897 28.485 27.3505C28.485 27.002 28.2091 26.713 27.8433 26.679H20.6567ZM27.8433 22.8022H20.6567C20.2616 22.8022 19.9417 23.1005 19.9417 23.466C19.9417 23.8315 20.2616 24.129 20.6567 24.129H27.8433C28.2375 24.129 28.5583 23.8315 28.5583 23.466C28.5583 23.1005 28.2375 22.8022 27.8433 22.8022ZM23.3966 18.9525H20.6567V18.961C20.2616 18.961 19.9417 19.2585 19.9417 19.624C19.9417 19.9895 20.2616 20.287 20.6567 20.287H23.3966C23.7917 20.287 24.1125 19.9895 24.1125 19.6147C24.1125 19.25 23.7917 18.9525 23.3966 18.9525Z" fill="url(#paint1_linear_371_284)"/>
      <path d="M65.0918 15C67.9233 15 69.5 16.513 69.5 19.1055V27.886C69.5 30.521 67.9233 32 65.0918 32H57.4092C54.6225 32 53 30.521 53 27.886V19.1055C53 16.513 54.6225 15 57.4092 15H65.0918ZM57.6567 26.679C57.3817 26.6535 57.1158 26.7725 56.9692 26.9935C56.8225 27.206 56.8225 27.4865 56.9692 27.7075C57.1158 27.92 57.3817 28.0475 57.6567 28.0135H64.8433C65.2091 27.9795 65.485 27.6897 65.485 27.3505C65.485 27.002 65.2091 26.713 64.8433 26.679H57.6567ZM64.8433 22.8022H57.6567C57.2616 22.8022 56.9417 23.1005 56.9417 23.466C56.9417 23.8315 57.2616 24.129 57.6567 24.129H64.8433C65.2375 24.129 65.5583 23.8315 65.5583 23.466C65.5583 23.1005 65.2375 22.8022 64.8433 22.8022ZM60.3966 18.9525H57.6567V18.961C57.2616 18.961 56.9417 19.2585 56.9417 19.624C56.9417 19.9895 57.2616 20.287 57.6567 20.287H60.3966C60.7917 20.287 61.1125 19.9895 61.1125 19.6147C61.1125 19.25 60.7917 18.9525 60.3966 18.9525Z" fill="url(#paint2_linear_371_284)"/>
      <defs>
      <linearGradient id="paint0_linear_371_284" x1="11.6735" y1="25.4545" x2="126.742" y2="24.969" gradientUnits="userSpaceOnUse">
      <stop offset="4.31555e-05" stop-color="#EB00FF"/>
      <stop offset="0.539583" stop-color="#9E00FF"/>
      <stop offset="1" stop-color="#00D0FF"/>
      </linearGradient>
      <linearGradient id="paint1_linear_371_284" x1="24.25" y1="15" x2="24.25" y2="32" gradientUnits="userSpaceOnUse">
      <stop stop-color="#EB00FF"/>
      <stop offset="0.539583" stop-color="#9E00FF"/>
      <stop offset="1" stop-color="#00D0FF"/>
      </linearGradient>
      <linearGradient id="paint2_linear_371_284" x1="61.25" y1="15" x2="61.25" y2="32" gradientUnits="userSpaceOnUse">
      <stop stop-color="#EB00FF"/>
      <stop offset="0.539583" stop-color="#9E00FF"/>
      <stop offset="1" stop-color="#00D0FF"/>
      </linearGradient>
      </defs>
      </svg> -->

          NOTE
        </h1>

        <div class="flex">
          <button class="add-todo">
            <i class="fas fa-plus search_icon"></i>
          </button>
          <div class="input_box">
            <input
              type="search"
              name="search_input"
              placeholder="Search..."
              id="search_input"
            />
            <button class="search_btn">
              <i class="fas fa-search search_icon"></i>
            </button>
          </div>
        </div>

        <!-- <div>
          <div class="loader"></div>
        </div> -->

        <ul class="lists">
          <li class="todo">
            <div>
              <div class="todo-container">
                <span class="title truncate-2"> Technology </span>
                <div class="edit-del">
                  <a class="edit">
                    <i class="fa-solid fa-marker icon"></i>
                  </a>
                  <a class="del">
                    <i class="fa-solid fa-trash icon" key="${v.id}"></i>
                  </a>
                </div>
              </div>
              <div>
                <h5 class="desc-heading">Description</h5>
                <p class="desc truncate-5">
                  Lorem ipsum dolor, sit amet consectetur adipisicing elit.
                  Deleniti explicabo harum impedit, voluptatum libero pariatur
                  praesentium nemo reiciendis qui. Possimus quia soluta culpa
                  voluptas enim amet ipsum repellendus, blanditiis suscipit!
                  Lorem ipsum dolor, sit amet consectetur adipisicing elit.
                  Velit cum accusantium dolore laborum similique? Eius optio
                  dolorum vel aliquid dolor aperiam a. Quod, suscipit iure vero
                  ullam laudantium iusto quis!
                </p>
              </div>
            </div>
          </li>
          <li class="todo">
            <div>
              <div>
                <div class="todo-container">
                  <span class="title truncate-2">
                    Technology Lorem ipsum dolor, sit amet consectetur
                    adipisicing elit. Fugit, consequatur reiciendis commodi
                    placeat eos fugiat ipsum nobis nostrum vel praesentium quasi
                    provident amet sed perspiciatis suscipit cupiditate, iste
                    sit id.
                  </span>
                  <div class="edit-del">
                    <a class="edit">
                      <i class="fa-solid fa-marker icon"></i>
                    </a>
                    <a class="del">
                      <i class="fa-solid fa-trash icon" key="${v.id}"></i>
                    </a>
                  </div>
                </div>
                <div>
                  <h5 class="desc-heading">Description</h5>
                  <p class="desc truncate-5">
                    Lorem ipsum dolor, sit amet consectetur adipisicing elit.
                    Deleniti explicabo harum impedit, voluptatum libero pariatur
                    praesentium nemo reiciendis qui. Possimus quia soluta culpa
                    voluptas enim amet ipsum repellendus, blanditiis suscipit!
                  </p>
                </div>
              </div>
            </div>
          </li>
          <li class="todo">
            <div>
              <div class="todo-container">
                <span class="title truncate-2"> Technology </span>
              </div>
              <div>
                <h5 class="desc-heading">Description</h5>
                <p class="desc truncate-5">
                  Lorem ipsum dolor, sit amet consectetur adipisicing elit.
                </p>
              </div>
            </div>
            <div class="edit-del">
              <a class="edit">
                <i class="fa-solid fa-marker icon"></i>
              </a>
              <a class="del">
                <i class="fa-solid fa-trash icon" key="${v.id}"></i>
              </a>
            </div>
          </li>
        </ul>
      </div>
    </div>

    <!-- <div class="overlay-2"> -->

    <!-- </div> -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script> -->
    <!-- <script src="https://unpkg.com/feather-icons"></script>  -->

    <script>
      const add_todo = document.querySelector(".add-todo");
      const overlay = document.querySelector(".overlay");
      const x = document.querySelector(".x");

      let url = "https://todosmania.herokuapp.com/api/";
      //let url='http://127.0.0.1:8000/api/'

      function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== "") {
          const cookies = document.cookie.split(";");
          for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) === name + "=") {
              cookieValue = decodeURIComponent(
                cookie.substring(name.length + 1)
              );
              break;
            }
          }
        }
        return cookieValue;
      }
      const csrftoken = getCookie("csrftoken");
      // feather.replace()

      const lists = document.querySelector(".lists");
      const overlay_2 = document.querySelector(".overlay-2");
      const loader = document.querySelector(".loader");

      //list();

      let activeItem;

      async function getTodos() {
        loaderActive();
        const res = await fetch(`${url}todos`);
        const json_res = await res.json();

        loaderDeactive();
        return json_res;
      }

      async function list() {
        lists.innerHTML = "";
        let response = await getTodos();
        //console.log(json_res)

        /*addlist=json_res.map(v=>{
    return `
    <li><span>
         ${v.title}
        </span>
        <div class="edit-del">
            <a href='' class="edit">
              <i class="fa-solid fa-marker"></i>
            </a>
            <a href='' class="del">
              <i class="fa-solid fa-trash" ></i>
            </a>
        </div>
      </li>`
}).join('')
*/
        //console.log(addlist)
        //lists.innerHTML=addlist

        let addlist = "";
        response.forEach((v) => {
          addlist = `  <li class="todo">
      <div >
        <div class="todo-container">
         <span class="title">
       ${v.title}
            </span>
            <div class="edit-del">
                <a  class="edit">

                  <i class="fa-solid fa-marker icon"></i>
                </a>
                <a  class="del">
                  <i class="fa-solid fa-trash icon " key=${v.id}></i>
                </a>
            </div>
           
        </div>
        <div>
          <h5 class="desc-heading">Description</h5>
         <p class="desc">
         ${v.desc}
         </p> 
        </div>
     
      </div>
        </li>`;

          lists.innerHTML += addlist;
        });
        //return json_res

        const lists_all = document.querySelectorAll(".todo");
        const edits_all = document.querySelectorAll(".edit");
        const title = document.querySelector(".title_input");
        const desc = document.querySelector(".desc_input");

        response.forEach((v, i) => {
          edits_all[i].addEventListener("click", async (e) => {
            title.value = v.title;
            desc.value = v.desc;

            activeItem = v;
            overlay.classList.add("active");
          });
        });

        lists_all.forEach((todo) => {
          //Delete Todo
          todo.addEventListener("click", (e) => {
            if (e.target.parentElement.classList.contains("del")) {
              const id = e.target.getAttribute("key");
              deleteTodo(id);

              setTimeout(() => {
                e.target.parentElement.parentElement.parentElement.parentElement.parentElement.style.transform =
                  "translateX(-80px)";
                e.target.parentElement.parentElement.parentElement.parentElement.parentElement.style.opacity =
                  "0";
                setTimeout(() => {
                  e.target.parentElement.parentElement.parentElement.parentElement.parentElement.remove();
                }, 1000);
              }, 500);

              getTodos();
            }
          });
        });
      }

      //Create new todo
      async function createTodo(data) {
        let mainUrl = `${url}create`;
        if (activeItem != null) {
          mainUrl = `${url}update/${activeItem.id}`;
        }

        const res = await fetch(`${mainUrl}`, {
          method: "POST",
          headers: {
            "Content-type": "application/json",
            "X-CSRFToken": csrftoken,
          },
          body: JSON.stringify(data),
        });

        activeItem = null;
      }

      //Delete Todo
      async function deleteTodo(id) {
        await fetch(`${url}delete/${id}`, {
          method: "DELETE",
        });
      }

      // Add Todo
      document.querySelector(".form").addEventListener("submit", async (e) => {
        e.preventDefault();
        const desc = document.querySelector(".desc_input");
        const title = document.querySelector(".title_input");

        let descVal = desc.value;
        let titleVal = title.value;

        //console.log(desc,title)
        await createTodo({ desc: descVal, title: titleVal });
        desc.value = "";
        title.value = "";
        overlay.classList.remove("active");

        list();
      });

      add_todo.addEventListener("click", () => {
        overlay.classList.add("active");
      });
      x.addEventListener("click", () => {
        overlay.classList.remove("active");
      });

      function loaderActive() {
        //overlay_2.classList.add("active")
        loader.classList.add("active");
      }
      function loaderDeactive() {
        //overlay_2.classList.remove("active")
        loader.classList.remove("active");
      }
    </script>
  </body>
</html>
